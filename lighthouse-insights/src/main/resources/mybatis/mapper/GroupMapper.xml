<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dtstep.lighthouse.insights.dao.GroupDao">

    <resultMap id="groupEntityMap" type="com.dtstep.lighthouse.insights.modal.Group">
        <id property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="columns" column="columns"
                jdbcType="VARCHAR"
                typeHandler="com.dtstep.lighthouse.insights.types.GroupColumnArrayTypeHandler"/>
    </resultMap>

    <insert id="insert" parameterType="com.dtstep.lighthouse.insights.modal.Group" >
        INSERT INTO ldp_stat_group (`token`,`columns`) VALUES
        (
            #{token,jdbcType=VARCHAR},
            #{columns, typeHandler=com.dtstep.lighthouse.insights.types.GroupColumnArrayTypeHandler}
        )
    </insert>

    <select id="queryById" resultMap="groupEntityMap">
        SELECT * FROM ldp_stat_group WHERE id = #{id}
    </select>
</mapper>